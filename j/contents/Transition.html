
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from Transition.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>About Transitions</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="browser.css" type="text/css" rel="stylesheet" title="Standard Style for Kirikiri References" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="Top Page" />
</head>
<body>
<h1><a id="id279" name="id279">About Transitions</a>
</h1><div class="para"><div>
 Transitions are used to swap screens over a period of time. In Kirikiri Z, transitions can be performed on a single layer or on a layer tree.<br />
 If a transition source is specified for a layer, the two layers will be swapped.<br />
 In the former case, the specific layer is swapped; in the latter case, the entire layer tree structure is swapped exactly as it is.<br />
 Please refer to the <a target="main" class="jump" href="f_Layer_beginTransition.html">Layer.beginTransition</a> method.<br />
<br />
 Kirikiri Z manages transitions using what are called "<a id="id280" name="id280" class="targanchor"><dfn>transition handlers</dfn></a>". These are specified via the name argument of the Layer.beginTransition method. The current version includes three handlers within the Kirikiri core. They can also be extended via plugins.<br />
<br />
 The following describes the transition handlers built into the Kirikiri core and those available through the extended transition plugin (extrans.dll).<br />
</div></div>
<h1><a id="id281" name="id281">Specifying Options</a>
</h1><div class="para"><div>
<br />
<dl>
<dt>When using from TJS2</dt>
<dd> Specify them as a dictionary array in the options argument of the Layer.beginTransition method. For example, to specify a "universal" transition with vague=100, time=2000, and rule=rule1.png, specify the options argument as follows:<br />
<br />
<code class="inlinecode">%[vague:100, time:2000, rule:"rule1.png"]</code></dd>
<dt>When using from KAG</dt>
<dd> In KAG, options are written directly as attributes in the trans tag. However, there are other attributes to specify besides options (layer, children, method attributes). Options are specified along with these attributes.<br />
 For example, to perform a "universal" transition on the base layer including child layers with vague=100, time=2000, and rule=rule1.png, do the following:<br />
<br />
<code class="inlinecode">@trans layer=base children=true method=universal vague=100 time=2000 rule=rule1.png</code><br />
<br />
 Also, for example, to use the "wave" transition with maxomega=0.1 and maxh=20, do the following:<br />
<br />
<code class="inlinecode">@trans layer=base children=true method=wave maxomega=0.1 maxh=20</code></dd></dl></div></div>
<h1><a id="id282" name="id282">Built-in Transition Handlers</a>
</h1><div class="para"><div>
 Kirikiri has the following three transition handlers built-in.<br />
<br />
<dl>
<dt><a id="id283" name="id283" class="targanchor"><dfn>crossfade</dfn></a></dt>
<dd> The "crossfade" transition (cross-fade transition) is the simplest transition and performs a simple cross-fade.<br />
 The options are as follows:<br />
<br />
<dl>
<dt>time (Required)</dt>
<dd> Specifies the duration of the transition in milliseconds.</dd></dl></dd>
<dt><a id="id284" name="id284" class="targanchor"><dfn>universal</dfn></a></dt>
<dd> The "universal" transition (universal transition) performs a transition according to a grayscale image called a rule image. The rule image is specified with the rule option. Darker areas of this image switch to the transition source (the back buffer in KAG) faster.<br />
 If the rule image is smaller than the screen being transitioned, it is tiled. If it is larger, only the top-left portion is used.<br />
 Detailed explanations can be found in the KAG reference.<br />
 The options are as follows:<br />
<br />
<dl>
<dt>time (Required)</dt>
<dd> Specifies the duration of the transition in milliseconds.</dd>
<dt>rule (Required)</dt>
<dd> Specifies the rule image filename. The rule image must be a 256-level grayscale image. If any other image is specified, it will be forcibly converted to grayscale.</dd>
<dt>vague</dt>
<dd>Specifies the "vague area value". Specifying a small value (like 0) makes the boundary between the pre-transition and post-transition areas sharp. Specifying a large value (like 128) makes this boundary blurred and smooth. The optimal value depends on the rule image. If omitted, 64 is assumed.</dd></dl></dd>
<dt><a id="id285" name="id285" class="targanchor"><dfn>scroll</dfn></a></dt>
<dd> The "scroll" transition (scroll transition) allows for scrolling effects by sliding either the source, the destination, or both.<br />
 The options are as follows:<br />
<br />
<dl>
<dt>time (Required)</dt>
<dd> Specifies the duration of the transition in milliseconds.</dd>
<dt>from</dt>
<dd> Specifies the direction from which the transition source (the back page in KAG) layer appears.<br />
 When specifying in TJS, sttLeft appears from the left (default), sttTop from the top, sttRight from the right, and sttBottom from the bottom.<br />
 When specifying in the KAG trans tag, "left" appears from the left (default), "top" from the top, "right" from the right, and "bottom" from the bottom.</dd>
<dt>stay</dt>
<dd> Specifies how the source and destination images move.<br />
 When specifying in TJS, ststNoStay causes the destination image to be pushed out by the source image (default). This creates the effect of two screens scrolling together. ststStaySrc causes the destination image to move out, revealing the source image from behind. ststStayDest keeps the destination image stationary while the source image moves in.<br />
 When specifying in KAG, "nostay" represents ststNoStay, "stayback" represents ststStaySrc, and "stayfore" represents ststStayDest.</dd></dl></dd></dl></div></div>

<h1><a id="id286" name="id286">Extended Transition Plugin</a>
</h1><div class="para"><div>
 The extended transition plugin (extrans.dll) is a plugin for Kirikiri Z that enables several transitions not built into the core.<br />
 To use it, like other plugins, it must be linked using the Plugins.link method (or the loadplugin tag in KAG). Once linked, the following transition handlers become available.<br />
<br />
<dl>
<dt>wave</dt>
<dd>The "wave" transition expresses waves via raster scrolling to switch screens.<br />
<br />
<img width="320" height="240" alt="wave_trans.jpg" src="wave_trans.jpg" /><br />
<br />
 The following options are available:<br />
<br />
<dl>
<dt>time (Required)</dt>
<dd> Specifies the duration of the transition in milliseconds.</dd>
<dt>wavetype</dt>
<dd> Specifies the wave movement. 0: waves are fine at the start and end, and broad in the middle. 1: waves start fine and gradually become broader. 2: waves start broad and gradually become finer. Default is 0.</dd>
<dt>maxh</dt>
<dd> Specifies the maximum width of the wave in pixels. Larger values result in deeper waves. Default is 50.</dd>
<dt>maxomega</dt>
<dd> Specifies the maximum angular velocity (rad/pixel) of the wave. Larger values make the waves finer. Smaller values make them broader. Default is 0.2.</dd>
<dt>bgcolor1</dt>
<dd> Specifies the initial background color in 0xRRGGBB format.</dd>
<dt>bgcolor2</dt>
<dd> Specifies the final background color in 0xRRGGBB format. The background color starts at bgcolor1 and gradually changes to bgcolor2.</dd></dl></dd>

<dt>mosaic</dt>
<dd>The "mosaic" transition creates an effect like a rectangular mosaic.<br />
<br />
<img width="320" height="240" alt="mosaic_trans.png" src="mosaic_trans.png" /><br />
<br />
 The following options are available:<br />
<br />
<dl>
<dt>time (Required)</dt>
<dd> Specifies the duration of the transition in milliseconds.</dd>
<dt>maxsize</dt>
<dd> Specifies the maximum size of the mosaic rectangles. Default is 30. Larger values make the mosaic coarser.</dd></dl></dd>

<dt>turn</dt>
<dd>The "turn" transition creates an effect like many small cards flipping over.<br />
<br />
<img width="320" height="240" alt="turn_trans.jpg" src="turn_trans.jpg" /><br />
<br />
 The following options are available:<br />
<br />
<dl>
<dt>time (Required)</dt>
<dd> Specifies the duration of the transition in milliseconds.</dd>
<dt>bgcolor</dt>
<dd> Specifies the background color in 0xRRGGBB format.</dd></dl></dd>

<dt>rotatezoom</dt>
<dd>The "rotatezoom" transition zooms in or out while rotating the transition source (the back buffer in KAG).<br />
<br />
<img width="320" height="24