<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- generated by to_html.pl from f_Layer.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>affineCopy - Affine Transformation Copy</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="funcref.css" type="text/css" rel="stylesheet" title="Standard Style for Class Reference" />
	<link href="mailto:dee@kikyou.info" rev="Made" />
	<link href="index.html" target="_top" rel="Start" title="Top Page" />
	<link href="f_Layer.html" title="Layer Class" rel="Parent" />
</head>
<body>
<h1><span class="fheader"><a name="top" id="top">Layer.affineCopy</a></span></h1><div class="para"><div>
<dl>
<dt>Function/Meaning</dt>
<dd>
Affine transformation copy</dd>
<dt>Type</dt>
<dd>
Method of <a class="jump" href="f_Layer.html">Layer class</a><br />
</dd>
<dt>Syntax</dt>
<dd>
<span class="funcdecl">affineCopy(<span class="arg">src</span>, <span class="arg">sleft</span>, <span class="arg">stop</span>, <span class="arg">swidth</span>, <span class="arg">sheight</span>, <span class="arg">affine</span>, <span class="arg">A</span>, <span class="arg">B</span>, <span class="arg">C</span>, <span class="arg">D</span>, <span class="arg">E</span>, <span class="arg">F</span>, <span class="arg">type</span><span class="defarg">=<span class="defargval">stNearest</span></span>, <span class="arg">clear</span><span class="defarg">=<span class="defargval">false</span></span>)</span><br />
</dd>
<dt>Arguments</dt>
<dd>
<table rules="all" frame="box" cellpadding="3" summary="Arguments of affineCopy">
<tr><td valign="top"><span class="argname">src</span></td>
<td>				 Specifies the source layer object.<br />
				 A Bitmap class object can also be specified. (Since 1.1.0)<br />
			</td></tr>
<tr><td valign="top"><span class="argname">sleft</span></td>
<td>				 Specifies the left position of the rectangle to copy (in the source layer's image coordinates) in pixels.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">stop</span></td>
<td>				 Specifies the top position of the rectangle to copy (in the source layer's image coordinates) in pixels.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">swidth</span></td>
<td>				 Specifies the width of the rectangle to copy (in the source layer's image coordinates) in pixels.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">sheight</span></td>
<td>				 Specifies the height of the rectangle to copy (in the source layer's image coordinates) in pixels.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">affine</span></td>
<td>				 Specifies how to handle the following six arguments (parameters A to F).<br />
				 If true is specified, the six parameters are interpreted as follows:<br />
				<span class="script">A   : a of the 2D affine transformation matrix</span><br />
				<span class="script">B   : b of the 2D affine transformation matrix</span><br />
				<span class="script">C   : c of the 2D affine transformation matrix</span><br />
				<span class="script">D   : d of the 2D affine transformation matrix</span><br />
				<span class="script">E   : tx of the 2D affine transformation matrix</span><br />
				<span class="script">F   : ty of the 2D affine transformation matrix</span><br />
				<br />
				 By affine transformation, the source image position (x, y) (where the top-left corner of the source rectangle is (0, 0)) is converted to the destination image position (x', y') by the following formula:<br />
				x' =  a*x + c*y + tx<br />
				y' =  b*x + d*y + ty<br />
				<br />
				 If false is specified, the six parameters are interpreted as follows. These parameters also accept real numbers.<br />
				<span class="script">A   : The X-coordinate position (x0) in the destination image of the top-left corner of the source rectangle.</span><br />
				<span class="script">B   : The Y-coordinate position (y0) in the destination image of the top-left corner of the source rectangle.</span><br />
				<span class="script">C   : The X-coordinate position (x1) in the destination image of the top-right corner of the source rectangle.</span><br />
				<span class="script">D   : The Y-coordinate position (y1) in the destination image of the top-right corner of the source rectangle.</span><br />
				<span class="script">E   : The X-coordinate position (x2) in the destination image of the bottom-left corner of the source rectangle.</span><br />
				<span class="script">F   : The Y-coordinate position (y2) in the destination image of the bottom-left corner of the source rectangle.</span><br />
				<br />
				 If false is specified, the destination position (x3, y3) corresponding to the bottom-right corner of the source is automatically calculated by the following formula:<br />
				x3 = x1 - x0 + x2<br />
				y3 = y1 - y0 + y2<br />
			</td></tr>
<tr><td valign="top"><span class="argname">A</span></td>
<td>				 Parameter A. Interpretation changes depending on the affine argument.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">B</span></td>
<td>				 Parameter B. Interpretation changes depending on the affine argument.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">C</span></td>
<td>				 Parameter C. Interpretation changes depending on the affine argument.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">D</span></td>
<td>				 Parameter D. Interpretation changes depending on the affine argument.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">E</span></td>
<td>				 Parameter E. Interpretation changes depending on the affine argument.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">F</span></td>
<td>				 Parameter F. Interpretation changes depending on the affine argument.<br />
			</td></tr>
<tr><td valign="top"><span class="argname">type</span></td>
<td>				 Specifies the type of affine transformation.<br />
				<span class="script"><a class="targanchor" name="id326" id="id326">stNearest</a>    </span> : Nearest neighbor method is used<br />
				<span class="script"><a class="targanchor" name="id327" id="id327">stFastLinear</a> </span> : Low-precision linear interpolation is used (partially implemented)<br />
				<span class="script"><a class="targanchor" name="id328" id="id328">stLinear</a>     </span> : Linear interpolation is used (not implemented)<br />
				<span class="script"><a class="targanchor" name="id329" id="id329">stCubic</a>      </span> : Cubic interpolation is used (not implemented)<br />
				 For stFastLinear, stLinear, and stCubic, stRefNoClip can be added using a bitwise OR. In this case, referencing outside the bitmap area to synthesize colors is permitted. If this is not specified, even if there is space around the source bitmap, it will not reference outside the source bitmap range (colors outside the range are considered the same as the nearest pixel within the range).<br />
			</td></tr>
<tr><td valign="top"><span class="argname">clear</span></td>
<td>				 Specifies whether to clear the area around the affine-transformed image in the destination layer with the color and opacity indicated by the <a class="jump" href="f_Layer_neutralColor.html">Layer.neutralColor</a> property. If true is specified, it is cleared; if this argument is omitted or false is passed, it is not cleared.<br />
				 The area to be cleared can also be restricted with the <a class="jump" href="f_Layer_setClip.html">Layer.setClip</a> method.<br />
				 Using this clear function avoids redundant clearing of the area to be overwritten (the part overwritten by the affine transformation in the cleared area) when clearing the destination layer before transferring the image with affine transformation.<br />
			</td></tr>
</table>
</dd>
<dt>Return Value</dt>
<dd>
None (void)<br />
</dd>
<dt>Description</dt>
<dd>
		 Copies the specified rectangle of the source layer to the destination (the layer executing the method) while performing an affine transformation.<br />
		 Depending on the affine argument, you can choose to specify a 2D affine transformation matrix as the transformation parameter or directly specify the points after transformation.<br />
		 In the current version, linear interpolation with stFastLinear is effective when the <a class="jump" href="f_Layer_face.html">Layer.face</a> property of the destination layer (the layer executing the method) is dfAlpha (or dfBoth) or dfAddAlpha. Linear interpolation is also possible when the Layer.face property is dfOpaque and the <a class="jump" href="f_Layer_holdAlpha.html">Layer.holdAlpha</a> property is false.<br />
		 If the <a class="jump" href="f_Layer_face.html">Layer.face</a> property of the destination layer (the layer executing the method) is dfAlpha (or dfBoth) or dfAddAlpha, both the main image and the mask image are copied.<br />
		 If the Layer.face property of the destination layer (the layer executing the method) is dfOpaque (or dfMain), only the main image is copied when the <a class="jump" href="f_Layer_holdAlpha.html">Layer.holdAlpha</a> property is true, and both the main image and the mask image are copied when it is false.<br />
		<br />
		 Transformation by a 2D affine transformation matrix is defined as follows, with the top-left of the source rectangle as the origin (0, 0):<br />