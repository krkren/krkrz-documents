<?xml version="1.0" encoding="UTF-8" ?>
<doc>
<title>About Environment-Dependent Issues</title>

<para>
<ptitle>Environment-Dependent Issues</ptitle>
These are issues in KiriKiri caused by the end-user's (secondary user's) environment and their countermeasures.<r/>
While we strive to prevent environment-dependent issues during KiriKiri's development, they are inevitable due to the vast diversity of computer settings and configurations.<r/>
While some specific symptoms can be addressed individually, please generally advise users to take the following measures:<r/>
<ul>
<li>Update drivers to the latest stable versions</li>
<li>Disable resident programs (especially those prone to conflicts like antivirus software, memory cleaners, window skinning tools, or Windows-compatible shells)</li>
<li>Check the computer using various diagnostic tools (such as the OS standard "Check Disk" or <at  target="_top"  href="http://www.memtest86.com/">memtest86</at>)</li>
<li>Check if there is sufficient free space on the HDD</li>
<li>Refer to resources like <at target="_top" href="http://homepage2.nifty.com/winfaq/">WinFAQ</at> (Oda's page) to see if similar symptoms have been reported and follow the recommended actions</li>
<li>Restart the computer in Safe Mode once, then restart normally</li>
<li>If using a CPU accelerator, certain CPU features may be restricted. Please read the CPU accelerator manual carefully. In some cases, specific CPU features must be disabled in the engine settings (e.g., for <at target="_top" href="http://buffalo.melcoinc.co.jp/qa/cpu/b4590010.html">http://buffalo.melcoinc.co.jp/qa/cpu/b4590010.html</at>, please disable SSE)</li>
<li>Reinstall the OS</li>
</ul>
Most options available for the KiriKiri engine exist to address environment-dependent issues. Please also refer to <link href="CommandLine" />.<r/>
</para>


<para>
<ptitle>Environment-Dependent Symptoms</ptitle>
In the following sections, "Engine Settings" refers to the end-user configuration tool (Engine Settings.exe).<r/>



<dl>




<dt>Installed data is corrupted</dt>
<dd>Symptoms include loading errors such as "A loading error occurred," freezing during execution, "EAccessViolation" errors, or other unpredictable behavior.<r/>
Since the installed data may be corrupted, please have the user check for corruption using a "File Corruption Check Tool" or similar.</dd>


<dt>Freezing during screen transitions or skipping</dt>
<dd>
If the application freezes during frequent screen updates, such as transitions or skipping in KAG, there may be an issue with the display driver.<r/>
Ensure the display driver is the latest stable version. Alternatively, changing the "Double Buffering Method" or "Wait for Vertical Sync" in the "Engine Settings" may resolve the issue.<r/>
If using the "nView Desktop Manager" utility bundled with nVIDIA graphics cards, please uninstall or disable it.<r/>
</dd>

<dt>Abnormally slow screen rendering</dt>
<dd>
If screen rendering is abnormally slow, especially when KiriKiri scales images in full-screen mode or when double buffering is explicitly enabled, changing the "Double Buffering Method" or "Wait for Vertical Sync" in the "Engine Settings" may help.<r/>
Additionally, if scaling is performed by the engine rather than the monitor, performance may degrade. In this case, setting "Screen Resolution in Full Screen" to "Nearest Resolution" in the engine settings will allow the display to handle scaling, though some displays may not maintain the correct aspect ratio.
</dd>

<dt>Screen remains black or graphics are distorted</dt>
<dd>
If the screen remains black, graphics are distorted, or the application freezes-especially when KiriKiri scales images in full-screen mode-changing the "Double Buffering Method" or "Wait for Vertical Sync" in the "Engine Settings" may resolve the issue.<r/>
</dd>


<dt>Video playback fails</dt>
<dd>
If video playback via overlay fails (errors occur or the application freezes), or if it freezes immediately after playback, disabling hardware acceleration may help. In "Display Properties" (right-click desktop -> Properties), go to the "Settings" tab, click "Advanced," then in the "Troubleshoot" tab, move the "Hardware Acceleration" slider from "Full" toward "None" and test.<r/>
We also recommend providing a script-side option to disable video playback.<r/>
Alternatively, changing the "Double Buffering Method" or "Wait for Vertical Sync" in the "Engine Settings" may resolve the issue.<r/>
</dd>

<!--
 ### This is no longer applicable because driver information is no longer checked just by loading DirectDraw ###
<dt>KiriKiri core attempts to connect to the network when switching to full screen</dt>
<dd>When attempting to switch to full screen, security software may issue a warning that the KiriKiri core is trying to connect to the internet.<r/>
KiriKiri loads DirectDraw only when switching to full screen, at which point it checks the DirectDraw driver version. During this process, it may connect to crl.microsoft.com to verify the validity of the driver signature. This occurs if "Check for publisher's certificate revocation" is checked in the "Advanced" tab of Internet Options (accessible via [Tools] - [Internet Options] in Internet Explorer).<r/>
This symptom occurs when the OS refers to information on the internet to verify the validity of the driver's digital signature. Although it is the OS that is actually attempting the connection, it may appear as if KiriKiri is trying to connect because the OS function is triggered within the KiriKiri program. Please be assured that these are not spyware-related processes.<r/>
If the end-user is concerned, please advise them to uncheck "Check for publisher's certificate revocation" or block the connection to that address using security software. This will not affect the operation of KiriKiri itself.<r/>
</dd>
-->

<!--
 ### Hopefully this issue no longer occurs as the full-screen algorithms in the KiriKiri core have been improved ###

<dt>Screen stretches vertically or horizontally in full screen</dt>
<dd>In some environments, particularly those using LCD displays, switching to full screen may cause the screen to stretch vertically or horizontally, failing to display at the correct aspect ratio. For example, this may happen when trying to display 640x480 or 800x600 screens on wide LCD panels or SXGA LCD panels.<r/>
In this case, please refer to the hardware manual and configure the settings to allow scaled display (full-screen display) while maintaining the aspect ratio.<r/>
Some LCD displays have a built-in function to scale images while maintaining the aspect ratio; please configure this according to the manual.<r/>
Additionally, some graphics cards (graphics chips) allow scaling while maintaining the aspect ratio via the driver; please configure this according to the manual.<r/>
KiriKiri itself also has a feature to enable full-screen mode while maintaining the aspect ratio. Setting "Graphics - Screen Resolution in Full Screen" to "Do not change screen resolution" in the engine settings will enable full-screen display while maintaining the aspect ratio.<r/>
</dd>
-->



<dt>Sound stutters, stops, or causes freezing during playback</dt>
<dd>Depending on the sound card or environment, audio may stutter, contain noise, or stop playing. In some cases, the application may freeze specifically during sound playback.<r/>
If this occurs during transitions or heavy effects, setting "General System - Low Priority" to "Yes" or "General System - Reduce CPU Usage" to "Yes" in the engine settings may help.<r/>
Additionally, changing the "Sound - DirectSound Software Mixing" setting in the engine settings might resolve it.<r/>
Alternatively, in the Control Panel under "Multimedia" (or "Sound and Multimedia" / "Sounds and Audio Devices Properties"), go to the "Audio" tab, click "Advanced" under "Sound Playback," and try moving the "Hardware Acceleration" slider on the "Performance" tab toward "None".<r/>
</dd>

<dt>Input/Operation issues</dt>
<dd>Resident software such as mouse movement assistants or mouse gesture tools may prevent proper operation. Please disable such software.<r/>
Third-party (non-OS standard) mouse drivers may also cause input issues; in such cases, disable or uninstall them and use the standard OS driver.<r/>
If a gamepad (joystick) is connected, a malfunction in the pad may prevent operation. Check if an object is resting on the pad, causing buttons to be held down.<r/>
Also, in some environments, if a gamepad is not connected, it may be detected as having buttons pressed; in this case, disable the gamepad driver.<r/>
Improper calibration of the gamepad or joystick axes can also cause issues; please calibrate the controller via "Game Controllers" in the Control Panel.<r/>
If the driver cannot be disabled, you can set KiriKiri to ignore the pad. Set "Enable Gamepad" to "No" in the engine settings.<r/>
If using a third-party mouse driver, the scroll wheel might not work; setting "Mouse Wheel Detection Method" to "Window Message" in the engine settings may resolve this.<r/>
</dd>


<dt>Frequent thrashing (disk swapping)</dt>
<dd>Insufficient memory may cause frequent thrashing (excessive swapping).<r/>
Setting "General System - Memory Usage" to "Low" in the engine settings may help.<r/>
However, since this reduces performance, you might instead try keeping that setting as is and lowering the "Graphics - Image Cache Limit" to a value like "4MB" or "8MB" to reduce memory usage with less impact on performance.<r/>
</dd>







</dl>

</para>


</doc>