<?xml version="1.0" encoding="UTF-8" ?>
<doc>
<title>Key/Signature Tool</title>

<para>
<ptitle>About the Key/Signature Tool</ptitle>
 The Key/Signature Tool is a tool for performing simple <kw>digital signatures</kw> on distributed data.<r/>
 By using digital signatures, you can check if a file was created by a legitimate author, and perform tampering and corruption checks.<r/>
 Currently, <link href="FileChkTool"/> utilizes these signatures.<r/>
</para>


<para>
<ptitle>About Public and Private Keys</ptitle>
 To use the Key/Signature Tool, you must use this tool to create a pair of keys (<kw>key pair</kw>) consisting of a "<kw>public key</kw>" (public key) and a "<kw>private key</kw>" (private key).<r/>
 Although called "keys," they are actually strings in the following format:<r/>
<bq>
-----BEGIN PUBLIC KEY-----<r/>
MIGJAoGBAJYfPysW57qE3J2ddGWEG+RzXUzFkWa0ct3p7qJfuWDB+52DbfS9qSpw<r/>
iTHQ54vl7K35x+WDQdn29cfgJxp9UD3fzY4h6E2ReE9vj4h0FCMK8dpCFnQkOD/M<r/>
hDSiXfXz7KmfMXppM0CjofvH+IL7BJ3/GcLFcuEw3hEnzoajIm1TAgMBAAE=<r/>
-----END PUBLIC KEY-----<r/>
</bq>
 The public key is a key that can be made public, while the private key must not be disclosed.<r/>
 The private key is used when signing. Digital signatures are generated using that private key.<r/>
 The public key is used when verifying the signature. The private and public keys always form a pair, and only a signature made with a specific private key can be successfully verified with its corresponding public key.<r/>
 If someone who does not know the private key signs with a different private key, the signature cannot be verified with the legitimate public key. Since it is impossible to guess the private key from the public key, only the person holding the private key can create a valid signature.<r/>
<note>
Originally, when the "public key" is published, it is necessary to verify if that "public key" is legitimate. If you do not know if the public key is legitimate in the first place, the meaning of the digital signature is diminished. However, the KiriKiri Key/Signature Tool does not go that far in its considerations.
</note>
<note>
The encryption method used by KiriKiri's Key/Signature Tool was changed from ECC (Elliptic Curve Cryptography) to RSA in version 2.25beta7.<r/>
The length of the RSA key generated by KiriKiri's Key/Signature Tool is 1024 bits. Also, the private key is not protected by a passphrase.<r/>
The RSA public/private keys generated by KiriKiri's Key/Signature Tool are compatible with PEM format keys from other software, but operations using keys generated outside of this tool, or using keys generated by this tool in other software, are not supported.<r/>
</note>
</para>

<para>
<ptitle>How to <kw>Generate Keys</kw></ptitle>
<r/>
 When you start the Key/Signature Tool (krkrsign.exe in the tools folder), the first screen displayed is the key generation screen.<r/>
<img src="sign0.png"/><r/><r/>
<r/>
<dl>
<dt>"Generate" button</dt>
<dd>
 Clicking this starts the key pair generation. First, a window saying "Collecting entropy" will appear, asking you to move the mouse randomly. Please follow the instructions (this is necessary to generate a key that cannot be guessed by others).<r/>
 When the window closes, the generated key pair will be displayed in the "Generated Public Key" and "Generated Private Key" fields below.<r/>
</dd>

<dt>Generated Public Key</dt>
<dd>
 Displays the generated public key. Pressing the "Copy" button next to it allows you to copy the key to the clipboard.
</dd>

<dt>Generated Private Key</dt>
<dd>
 Displays the generated private key. Pressing the "Copy" button next to it allows you to copy the key to the clipboard.<r/>
 Note that for security reasons, the clipboard contents will be cleared when this window is closed.<r/>
</dd>
</dl>

</para>


<para>
<ptitle>How to <kw>Sign</kw></ptitle>
<r/>
 Clicking the "Sign" tab displays the signing screen.<r/>
<img src="sign1.png"/><r/><r/>
<r/>
<dl>
<dt>Private Key</dt>
<dd>
 Specify the private key.
</dd>

<dt>Target File</dt>
<dd>
 You can specify the file to be signed.<r/>
 Pressing the "Browse" button opens a file browser dialog box, so please specify the target file.<r/>
 You can also specify the target file by dropping it onto this window (the current version cannot sign multiple files at once).<r/>
</dd>

<dt>"Sign" button</dt>
<dd>
 Signs the target file.<r/>
 The signature file will have the extension .sig added to the target file's name, but as an exception, for the KiriKiri executable itself, the signature is embedded within the executable.<r/>
</dd>
</dl>
</para>

<para>
<ptitle>How to <kw>Verify Signatures</kw></ptitle>
<r/>
 Clicking the "Verify Signature" tab displays the verification screen.<r/>
<img src="sign2.png"/><r/><r/>
<r/>
<dl>
<dt>Public Key</dt>
<dd>
 Specify the public key.
</dd>

<dt>Target File</dt>
<dd>
 You can specify the file for signature verification.<r/>
 Pressing the "Browse" button opens a file browser dialog box, so please specify the target file.<r/>
 You can also specify the target file by dropping it onto this window (the current version cannot verify multiple file signatures at once with this tool).<r/>
</dd>

<dt>"Check" button</dt>
<dd>
 Verifies the signature of the target file.<r/>
 The result is notified via a message box.
</dd>
</dl>
</para>


<para>
<ptitle>Usage from the Command Line</ptitle>
 By using the Key/Signature Tool from the command line, you can sign files. This is convenient when used in combination with tools like make.<r/>
 Specify using the following format:<r/>
<bq>
krkrsign -sign "Target file name" "Private key file name"
</bq>
For the private key file name, specify a file where the private key is saved as text.<r/>
For example, to sign game.eXe:<r/>
<bq>
krkrsign -sign "game.eXe" "key.priv"
</bq>
 Only one file can be signed per call.
</para>




</doc>